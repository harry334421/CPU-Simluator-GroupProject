LDX X1, 28
LDX X2, 29
LDX X3, 30
LDA R3, 0, 0
#print: STR R3, X1, 0
LDR R1, 30
AMR R1, X1, 0
STR R1, X1, 1
LDR R0, X1, 1,I
LDA R2, 0, 4 -- EOF
TRR R0, R2
JCC 4, X2, 15 #next
OUT R0, 1
AIR R3, 1
JMA X2, 4 #print
#next: LDA R0, 0, 10
OUT R0, 1 -- '\n'
LDA R0, 0, 31
SRC R0, 1, 1, 1
AIR R0, 21
OUT R0, 1 -- 'S'
SIR R0, 14
OUT R0, 1 -- 'E'
SIR R0, 4
OUT R0, 1 -- 'A'
AIR R0, 17
OUT R0, 1 -- 'R'
SIR R0, 15
OUT R0, 1 -- 'C'
AIR R0, 5
OUT R0, 1 -- 'H'
SIR R0, 14
OUT R0, 1 -- ':'
LDA R0, 0 31
AIR R0, 1
OUT R0, 1 -- ' '
#update code seg addr: LDR R0, 29
AIR R0, 31
AIR R0, 16 #input
STR R0, 29
LDX X2, 29
LDA R0, X3
SIR R0, 20
STR R0, X1, 0 -- tmp[0]
LDR R1, X1, 0
AIR R1, 0
STR R1, X1, 1 -- tmp[1]
#input: IN R0, 0
STR R0, X1, 1,I
LDA R2, 0, 4 -- EOF
TRR R0, R2
JCC 4, X2, 8 #search prepare
AIR R1, 1
STR R1, X1, 1
JMA X2, 0 #input
#search prepare: LDR R0, X1, 1
SMR R0, X1, 0
AIR R0, 0
STR R0, X1, 1 -- store word length into tmp[1]
#update code seg addr: LDR R0, 29
AIR R0, 31
AIR R0, 4
STR R0, X1, 7 -- tmp[7] #get_char
AIR R0, 18
STR R0, X1, 8 -- tmp[8] #clear
AIR R0, 6
STR R0, X1, 9 -- tmp[9] #equal
AIR R0, 8
STR R0, X1, 10 -- tmp[10] #find
AIR R0, 30
STR R0, X1, 11 -- tmp[11] #add_word_index
AIR R0, 4
STR R0, X1, 12 -- tmp[12] #add_sent_index
AIR R0, 6
STR R0, 29
LDX X2, 29 -- #end
LDR R0, X1, 0
STR R0, X1, 2 -- tmp[2] word address
LDA R0, 1
STR R0, X1, 4 -- tmp[4] word index
STR R0, X1, 5 -- tmp[5] sentence index
LDR R0, X1, 1
#get_char: STR R0, X1, 3 -- tmp[3] tmp length
LDR R1, X3, 0
LDA R2, 4 -- EOF
TRR R1, R2
JCC 4, X2 #end
AIR R2, 28 -- ' '
TRR R1, R2
JCC 4, X1, 11,I #add_word_index
AIR R2, 14 -- '.'
TRR R1, R2
JCC 4, X1, 12,I #add_sent_index
LDR R2, X1, 1
SMR R2, X1, 3
AMR R2, X1, 2
STR R2, X1, 6 -- tmp[6] tmp address
LDR R2, X1, 6,I
TRR R1, R2
JCC 4, X1, 9,I #equal
#clear: LDR R0, X1, 1
LDR R1, 30
AIR R1, 1
STR R1, 30
LDX X3, 30
JMA X1, 7,I #get_char
#equal: LDR R0, X1, 3
LDR R1, 30
AIR R1, 1
STR R1, 30
LDX X3, 30
SOB R0 X1, 7,I #get_char
#find: LDA R0, 0, 10
OUT R0, 1 -- '\n'
LDA R0, 0, 31
AIR R0, 31
AIR R0, 8
OUT R0, 1 -- 'F'
AIR R0, 9
OUT R0, 1 -- 'O'
AIR R0, 6
OUT R0, 1 -- 'U'
SIR R0, 7
OUT R0, 1 -- 'N'
SIR R0, 10
OUT R0, 1 -- 'D'
LDA R1, 0, 31
AIR R1, 1
OUT R1, 1 -- ' '
AIR R0, 15
OUT R0, 1 -- 'S'
LDA R2, 31
AIR R2, 17
AMR R2, X1, 5
OUT R2, 1 -- sent index
OUT R1, 1 -- ' '
AIR R0, 4
OUT R0, 1 -- 'W'
SMR R2, X1, 5
AMR R2, X1, 4
OUT R2, 1 -- word index
LDA R0, 0, 10
OUT R0, 1 -- '\n'
HLT
#add_word_index: LDR R0, X1, 4
AIR R0, 1
STR R0, X1, 4
JMA X1, 8,I #clear
#add_sent_index: LDR R0, X1, 5
AIR R0, 1
STR R0, X1, 5
LDA R0, 0
STR R0, X1, 4
JMA X1, 8,I #clear
#end: LDA R0 0, 10
OUT R0, 1 -- '\n'
AIR R0, 31
AIR R0, 24
AIR R0, 13
OUT R0, 1 -- 'N'
AIR R0, 1
OUT R0, 1 -- 'O'
AIR R0, 5
OUT R0, 1 -- 'T'
LDA R1, 0, 31
AIR R1, 1
OUT R1, 1 -- ' '
SIR R0, 14
OUT R0, 1 -- 'F'
AIR R0, 9
OUT R0, 1 -- 'O'
AIR R0, 6
OUT R0, 1 -- 'U'
SIR R0, 7
OUT R0, 1 -- 'N'
SIR R0, 10
OUT R0, 1 -- 'D'
LDA R0, 0, 10
OUT R0, 1 -- '\n'
HLT



"1000010001011100",
"1000010010011101",
"1000010011011110",
"0000111100000000",
"0000101101000000",
"0000010100011110",
"0001000101000000",
"0000100101000001",
"0000010001100001",
"0000111000000100",
"0100100010000000",
"0010101110001111",
"1100100000000001",
"0001101100000001",
"0010110010000100",
"0000110000001010",
"1100100000000001",
"0000110000011111",
"0110010011000001",
"0001100000010101",
"1100100000000001",
"0001110000001110",
"1100100000000001",
"0001110000000100",
"1100100000000001",
"0001100000010001",
"1100100000000001",
"0001110000001111",
"1100100000000001",
"0001100000000101",
"1100100000000001",
"0001110000001110",
"1100100000000001",
"0000110000011111",
"0001100000000001",
"1100100000000001",
"0000010000011101",
"0001100000011111",
"0001100000010000",
"0000100000011101",
"1000010010011101",
"0000110011000000",
"0001110000010100",
"0000100001000000",
"0000010101000000",
"0001100100000000",
"0000100101000001",
"1100010000000000",
"0000100001100001",
"0000111000000100",
"0100100010000000",
"0010101110001000",
"0001100100000001",
"0000100101000001",
"0010110010000000",
"0000010001000001",
"0001010001000000",
"0001100000000000",
"0000100001000001",
"0000010000011101",
"0001100000011111",
"0001100000000100",
"0000100001000111",
"0001100000010010",
"0000100001001000",
"0001100000000110",
"0000100001001001",
"0001100000001000",
"0000100001001010",
"0001100000011110",
"0000100001001011",
"0001100000000100",
"0000100001001100",
"0001100000000110",
"0000100000011101",
"1000010010011101",
"0000010001000000",
"0000100001000010",
"0000110000000001",
"0000100001000100",
"0000100001000101",
"0000010001000001",
"0000100001000011",
"0000010111000000",
"0000111000000100",
"0100100110000000",
"0010101110000000",
"0001101000011100",
"0100100110000000",
"0010101101101011",
"0001101000001110",
"0100100110000000",
"0010101101101100",
"0000011001000001",
"0001011001000011",
"0001001001000010",
"0000101001000110",
"0000011001100110",
"0100100110000000",
"0010101101101001",
"0000010001000001",
"0000010100011110",
"0001100100000001",
"0000100100011110",
"1000010011011110",
"0010110001100111",
"0000010001000011",
"0000010100011110",
"0001100100000001",
"0000100100011110",
"1000010011011110",
"0011100001100111",
"0000110000001010",
"1100100000000001",
"0000110000011111",
"0001100000011111",
"0001100000001000",
"1100100000000001",
"0001100000001001",
"1100100000000001",
"0001100000000110",
"1100100000000001",
"0001110000000111",
"1100100000000001",
"0001110000001010",
"1100100000000001",
"0000110100011111",
"0001100100000001",
"1100100100000001",
"0001100000001111",
"1100100000000001",
"0000111000011111",
"0001101000010001",
"0001001001000101",
"1100101000000001",
"1100100100000001",
"0001100000000100",
"1100100000000001",
"0001011001000101",
"0001001001000100",
"1100101000000001",
"0000110000001010",
"1100100000000001",
"0000000000000000",
"0000010001000100",
"0001100000000001",
"0000100001000100",
"0010110001101000",
"0000010001000101",
"0001100000000001",
"0000100001000101",
"0000110000000000",
"0000100001000100",
"0010110001101000",
"0000110000001010",
"1100100000000001",
"0001100000011111",
"0001100000011000",
"0001100000001101",
"1100100000000001",
"0001100000000001",
"1100100000000001",
"0001100000000101",
"1100100000000001",
"0000110100011111",
"0001100100000001",
"1100100100000001",
"0001110000001110",
"1100100000000001",
"0001100000001001",
"1100100000000001",
"0001100000000110",
"1100100000000001",
"0001110000000111",
"1100100000000001",
"0001110000001010",
"1100100000000001",
"0000110000001010",
"1100100000000001",
"0000000000000000"
